package app.majo.domain.repository

import app.majo.domain.model.action.Action
import kotlinx.coroutines.flow.Flow

/**
 * Репозиторий для управления активностями.
 *
 * Этот интерфейс является **контрактом** (Contract) для слоя данных.
 * Он определяет, какие операции с активностями доступны для бизнес-логики
 * (Use Cases или ViewModels), полностью скрывая, как именно эти данные
 * хранятся (Room, сеть, DataStore).
 */
interface ActionRepository {

    /**
     * Возвращает реактивный поток всех активностей.
     *
     * Это реактивный метод: он автоматически испускает новый список [Action]
     * каждый раз, когда данные в базе данных изменяются (добавление, обновление, удаление).
     *
     * @return [Flow] списка доменных моделей [Action].
     */
    fun getActions(): Flow<List<Action>>

    /**
     * Возвращает одну активность по ее ID.
     *
     * Это suspend-функция, которая выполняет блокирующую операцию чтения
     * в фоновом потоке (внутри корутины).
     *
     * @param id Уникальный Long-идентификатор активности.
     * @return Доменная модель [Action] или null, если активность не найдена.
     */
    suspend fun getActionById(id: Long): Action?

    /**
     * Добавляет новую активность в систему.
     *
     * Принимает на вход чистую доменную модель [Action].
     *
     * @param action Доменная модель [Action] для вставки.
     */
    suspend fun insert(action: Action)

    /**
     * Обновляет существующую активность.
     *
     * Обновление происходит на основе ID, содержащегося в модели [Action].
     *
     * @param action Доменная модель [Action] с обновленными данными.
     */
    suspend fun update(action: Action)

    /**
     * Удаляет (или, по смыслу, архивирует) активность по ее ID.
     *
     * @param id ID активности, которую нужно удалить.
     */
    suspend fun delete(id: Long)
}